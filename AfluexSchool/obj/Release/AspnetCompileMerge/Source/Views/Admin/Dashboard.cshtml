@model AfluexSchool.Models.DashBoard

@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container main-container" id="main-container">
    <div class="row">
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Total Parent</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.TotalParent</h4>
                        </div>
                        <div class="col-auto bg-success  text-white py-2">
                            <a class="mb-0" href="/Parent/ParentList"><span style="margin-top:35px" class="text-mute d-block">View Details</span></a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Total Student</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.TotalStudent</h4>
                        </div>
                        <div class="col-auto bg-primary  text-white py-2">
                            <a  class="mb-0" href="/Student/StudentRegistrationList"><span style="margin-top:35px" class="text-mute d-block">View Details</span></a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Total Employee</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.TotalStaff</h4>
                        </div>
                        <div class="col-auto bg-info  text-white py-2">
                            <a   class="mb-0" href="/Permission/UserList"><span style="margin-top:35px" class="text-mute d-block">View Details</span></a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Total Teacher</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.TotalTeacher</h4>
                        </div>
                        <div class="col-auto bg-danger  text-white py-2">
                            <a   class="mb-0" href="/Teacher/TeacherList"><span style="margin-top:35px" class="text-mute d-block">View Details</span></a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Total SMS</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.TotalSMS</h4>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Send SMS</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.TotalSendSMS</h4>
                        </div>
                        <div class="col-auto bg-danger  text-white py-2">
                            <a   class="mb-0" href="/AdminReports/UsedSMS?Status=Send"><span style="margin-top:35px" class="text-mute d-block">View Details</span></a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Failed SMS</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.TotalUnSendSMS</h4>
                        </div>
                        <div class="col-auto bg-primary  text-white py-2">
                            <a   class="mb-0" href="/AdminReports/UsedSMS?Status=Failed"><span style="margin-top:35px" class="text-mute d-block">View Details</span></a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6 col-xl-3">
            <div class="card border-0 shadow-sm overflow-hidden mb-4">
                <div class="card-body py-0">
                    <div class="row">
                        <div class="col py-2 pr-0">
                            <p>Balance</p><br>
                            <h4 class="font-weight-light mb-0">@ViewBag.Balance</h4>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">

        <div class="col-12 col-md-4 col-lg-4 col-xl-4 mb-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header border-0 bg-none">
                    <div class="row">
                        <div class="col">
                            <p class="fs15">SMS Summary<br><small class="text-template-primary-light"></small></p>
                        </div>

                    </div>
                </div>
                <div class="card-body">
                    <div id="divsmschart"></div>

                </div>
            </div>
        </div>
        <div class="col-12 col-md-4 col-lg-4 col-xl-4 mb-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header border-0 bg-none">
                    <div class="row">
                        <div class="col">
                            <p class="fs15">Staff/Teacher<br><small class="text-template-primary-light"></small></p>
                        </div>

                    </div>
                </div>
                <div class="card-body">
                    <div id="divstaffchart"></div>

                </div>
            </div>
        </div>
        <div class="col-12 col-md-4 col-lg-4 col-xl-4 mb-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header border-0 bg-none">
                    <div class="row">
                        <div class="col">
                            <p class="fs15">Student/Parent<br><small class="text-template-primary-light"></small></p>
                        </div>

                    </div>
                </div>
                <div class="card-body">
                    <div id="divparentchart"></div>

                </div>
            </div>
        </div>
    </div>

    <div class="row">

        <div class="col-12 col-md-12 col-lg-12 col-xl-12">
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header border-0 bg-none">
                    <div class="row">
                        <div class="col align-self-center">
                            <p class="fs15">Top 10 Teachers<br><small class="text-template-primary-light">Most recent new registrations</small></p>
                        </div>
                    </div>
                </div>
                <div class="card-body ">
                    <div class="row">
                        @if (Model != null)
                        {
                            if (Model.lstteacher != null)
                            {
                                foreach (var item in Model.lstteacher)
                                {
                                    <div class="col-3 mb-3 text-center">
                                        <figure class="avatar avatar-110 mb-3">
                                            <button class="btn btn-sm text-danger user-like"><i class="material-icons md-18">favorite</i></button>
                                            <img src="../@item.ImagePath" alt="">
                                        </figure>
                                        <p class="mb-1">@item.Name</p>
                                        <p class="text-template-primary-light">@item.Qualification</p>
                                    </div>
                                }
                            }
                        }


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../../AdminPanelcss/assets/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(bindsms);

    function bindsms() {
        $.ajax({
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            url: '/Admin/BindSMSChart',
            data: JSON.stringify(),
            success:
            function (response) {
                var datare = response;
                var data = new google.visualization.DataTable();

                data.addColumn('string', 'Status');
                data.addColumn('number', 'Total');


                for (var i = 0; i < datare.length; i++) {
                    data.addRow(
                        [datare[i].Status, parseInt(datare[i].Total)]

                        );


                }


                var chart = new google.visualization.PieChart(document.getElementById('divsmschart'));
                var options = {
                    pieSliceText: 'value-and-percentage',
                    format: 'decimal',
                    is3D: true,
                    legend: { position: 'top' },
                    animation: {
                        startup: true,
                        duration: 1000,
                        easing: 'out',
                    }, chartArea: { width: "80%", height: "80%" }
                };

                chart.draw(data, options);




            },
            error: function () {
            }
        });
    }


    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(bindstaff);

    function bindstaff() {
        $.ajax({
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            url: '/Admin/BindStaffChart',
            data: JSON.stringify(),
            success:
            function (response) {
                var datare = response;
                var data = new google.visualization.DataTable();

                data.addColumn('string', 'Status');
                data.addColumn('number', 'Total');


                for (var i = 0; i < datare.length; i++) {
                    data.addRow(
                        [datare[i].Status, parseInt(datare[i].Total)]

                        );


                }


                var chart = new google.visualization.PieChart(document.getElementById('divstaffchart'));
                var options = {
                    pieSliceText: 'value-and-percentage',
                    format: 'decimal',
                    is3D: true,
                    legend: { position: 'top' },
                    animation: {
                        startup: true,
                        duration: 1000,
                        easing: 'out',
                    }, chartArea: { width: "80%", height: "80%" }
                };

                chart.draw(data, options);




            },
            error: function () {
            }
        });
    }


    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(bindparent);

    function bindparent() {
        $.ajax({
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            url: '/Admin/BindParentChart',
            data: JSON.stringify(),
            success:
            function (response) {
                var datare = response;
                var data = new google.visualization.DataTable();

                data.addColumn('string', 'Status');
                data.addColumn('number', 'Total');


                for (var i = 0; i < datare.length; i++) {
                    data.addRow(
                        [datare[i].Status, parseInt(datare[i].Total)]

                        );


                }


                var chart = new google.visualization.PieChart(document.getElementById('divparentchart'));
                var options = {
                    pieSliceText: 'value-and-percentage',
                    format: 'decimal',
                    is3D: true,
                    legend: { position: 'top' },
                    animation: {
                        startup: true,
                        duration: 1000,
                        easing: 'out',
                    }, chartArea: { width: "80%", height: "80%" }
                };

                chart.draw(data, options);




            },
            error: function () {
            }
        });
    }

</script>